{"ast":null,"code":"var _jsxFileName = \"/Users/rupeshkumarsingh/Downloads/Gps-frontend/webadmin/src/pages/ManageStops.js\",\n  _s = $RefreshSig$();\n// // src/pages/ManageStops.js\n// import { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n\n// export default function ManageStops() {\n//   const [stops, setStops] = useState([]);\n//   const role = localStorage.getItem(\"role\");\n//   const token = localStorage.getItem(\"token\");\n// const [roundFilter, setRoundFilter] = useState(\"\");\n// const [driverFilter, setDriverFilter] = useState(\"\");\n\n//   const headers = { Authorization: `Bearer ${token}` };\n\n//   useEffect(() => {\n//     fetchStops();\n//   }, []);\n\n//   // ‚úÖ Fetch stops\n//   const fetchStops = async () => {\n//     try {\n//       let url = \"\";\n//       if (role === \"superadmin\") {\n//         url = \"https://gps.smartbus360.com/api/stops/all\";\n//       } else if (role === \"schooladmin\") {\n//         url = \"https://gps.smartbus360.com/api/stops/school\";\n//       }\n//       const res = await axios.get(url, { headers });\n//       setStops(res.data);\n//     } catch (err) {\n//       console.error(\"Error fetching stops:\", err);\n//     }\n//   };\n\n//   // ‚úÖ Export stops CSV\n//   const exportStops = async () => {\n//     try {\n//       let url = \"\";\n//       if (role === \"superadmin\") {\n//         url = \"https://gps.smartbus360.com/api/stops/export/all\";\n//       } else if (role === \"schooladmin\") {\n//         url = \"https://gps.smartbus360.com/api/stops/export/school\";\n//       }\n\n//       const res = await axios.get(url, {\n//         headers,\n//         responseType: \"blob\", // download CSV\n//       });\n\n//       const blob = new Blob([res.data], { type: \"text/csv\" });\n//       const link = document.createElement(\"a\");\n//       link.href = window.URL.createObjectURL(blob);\n//       link.download =\n//         role === \"superadmin\" ? \"stops_all.csv\" : \"stops_school.csv\";\n//       link.click();\n//     } catch (err) {\n//       console.error(\"Error exporting CSV:\", err);\n//     }\n//   };\n\n//   return (\n//     <div>\n//       <h1 className=\"text-2xl font-bold mb-6\">üõë Manage Stops</h1>\n\n//       <button\n//         onClick={exportStops}\n//         className=\"mb-4 bg-green-600 text-white px-4 py-2 rounded\"\n//       >\n//         ‚¨áÔ∏è Export CSV\n//       </button>\n\n//       {stops.length === 0 ? (\n//         <p>No stops found.</p>\n//       ) : (\n//         <table className=\"min-w-full bg-white border rounded shadow\">\n//           <thead>\n//             <tr className=\"bg-gray-200 text-left\">\n//               <th className=\"py-2 px-4 border\">ID</th>\n//               <th className=\"py-2 px-4 border\">Round</th>\n//               <th className=\"py-2 px-4 border\">Stop Order</th>\n//               <th className=\"py-2 px-4 border\">Latitude</th>\n//               <th className=\"py-2 px-4 border\">Longitude</th>\n//               <th className=\"py-2 px-4 border\">Placename</th>\n//               <th className=\"py-2 px-4 border\">Driver</th>\n//               <th className=\"py-2 px-4 border\">School</th>\n//               <th className=\"py-2 px-4 border\">Created At</th>\n//             </tr>\n//           </thead>\n//           <tbody>\n//             {stops.map((stop) => (\n//               <tr key={stop.id}>\n//                 <td className=\"py-2 px-4 border\">{stop.id}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.round_name}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.stop_order}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.latitude}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.longitude}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.placename}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.driver_name}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.school_name}</td>\n//                 <td className=\"py-2 px-4 border\">\n//                   {new Date(stop.created_at).toLocaleString()}\n//                 </td>\n//               </tr>\n//             ))}\n//           </tbody>\n//         </table>\n//       )}\n//     </div>\n//   );\n// }\n\n// src/pages/ManageStops.js\n// src/pages/ManageStops.js\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ManageStops() {\n  _s();\n  const [stops, setStops] = useState([]);\n  const [drivers, setDrivers] = useState([]);\n  const [roundFilter, setRoundFilter] = useState(\"\");\n  const [driverFilter, setDriverFilter] = useState(\"\");\n  const role = localStorage.getItem(\"role\");\n  const token = localStorage.getItem(\"token\");\n  const headers = {\n    Authorization: `Bearer ${token}`\n  };\n  useEffect(() => {\n    fetchStops();\n    if (role === \"schooladmin\") {\n      fetchDrivers();\n    }\n  }, [role]);\n\n  // ‚úÖ Fetch stops (with filters for schooladmin)\n  const fetchStops = async () => {\n    try {\n      let url = \"\";\n      if (role === \"superadmin\") {\n        url = \"https://gps.smartbus360.com/api/stops/all\";\n      } else if (role === \"schooladmin\") {\n        url = \"https://gps.smartbus360.com/api/stops/school\";\n        const params = new URLSearchParams();\n        if (roundFilter) params.append(\"round\", roundFilter);\n        if (driverFilter) params.append(\"driver_id\", driverFilter);\n        if (params.toString()) {\n          url += `?${params.toString()}`;\n        }\n      }\n      const res = await axios.get(url, {\n        headers\n      });\n      setStops(res.data);\n    } catch (err) {\n      console.error(\"Error fetching stops:\", err);\n    }\n  };\n\n  // ‚úÖ Fetch drivers list for dropdown\n  const fetchDrivers = async () => {\n    try {\n      const res = await axios.get(\"https://gps.smartbus360.com/api/drivers\", {\n        headers\n      });\n      setDrivers(res.data);\n    } catch (err) {\n      console.error(\"Error fetching drivers:\", err);\n    }\n  };\n\n  // ‚úÖ Export stops CSV (with filters for schooladmin)\n  const exportStops = async () => {\n    try {\n      let url = \"\";\n      if (role === \"superadmin\") {\n        url = \"https://gps.smartbus360.com/api/stops/export/all\";\n      } else if (role === \"schooladmin\") {\n        url = \"https://gps.smartbus360.com/api/schooladmins/export/school\";\n        const params = new URLSearchParams();\n        if (roundFilter) params.append(\"round\", roundFilter);\n        if (driverFilter) params.append(\"driver_id\", driverFilter);\n        if (params.toString()) {\n          url += `?${params.toString()}`;\n        }\n      }\n      const res = await axios.get(url, {\n        headers,\n        responseType: \"blob\"\n      });\n      const blob = new Blob([res.data], {\n        type: \"text/csv\"\n      });\n      const link = document.createElement(\"a\");\n      link.href = window.URL.createObjectURL(blob);\n      link.download = role === \"superadmin\" ? \"stops_all.csv\" : \"stops_school.csv\";\n      link.click();\n    } catch (err) {\n      console.error(\"Error exporting CSV:\", err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-6\",\n      children: \"\\uD83D\\uDED1 Manage Stops\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), role === \"schooladmin\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Round Name\",\n        value: roundFilter,\n        onChange: e => setRoundFilter(e.target.value),\n        className: \"border px-2 py-1 rounded\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: driverFilter,\n        onChange: e => setDriverFilter(e.target.value),\n        className: \"border px-2 py-1 rounded\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"All Drivers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this), drivers.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: d.id,\n          children: [d.id, \" - \", d.name]\n        }, d.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchStops,\n        className: \"bg-blue-600 text-white px-4 py-2 rounded\",\n        children: \"Apply Filters\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: exportStops,\n      className: \"mb-4 bg-green-600 text-white px-4 py-2 rounded\",\n      children: \"\\u2B07\\uFE0F Export CSV\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), stops.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No stops found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"min-w-full bg-white border rounded shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"bg-gray-200 text-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"py-2 px-4 border\",\n            children: \"ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"py-2 px-4 border\",\n            children: \"Round\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"py-2 px-4 border\",\n            children: \"Stop Order\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"py-2 px-4 border\",\n            children: \"Latitude\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"py-2 px-4 border\",\n            children: \"Longitude\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"py-2 px-4 border\",\n            children: \"Placename\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"py-2 px-4 border\",\n            children: \"Driver\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"py-2 px-4 border\",\n            children: \"School\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"py-2 px-4 border\",\n            children: \"Created At\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: stops.map(stop => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"py-2 px-4 border\",\n            children: stop.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"py-2 px-4 border\",\n            children: stop.round_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"py-2 px-4 border\",\n            children: stop.stop_order\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"py-2 px-4 border\",\n            children: stop.latitude\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"py-2 px-4 border\",\n            children: stop.longitude\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"py-2 px-4 border\",\n            children: stop.placename || \"N/A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"py-2 px-4 border\",\n            children: stop.driver_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"py-2 px-4 border\",\n            children: stop.school_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"py-2 px-4 border\",\n            children: new Date(stop.created_at).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 17\n          }, this)]\n        }, stop.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n}\n_s(ManageStops, \"v8+8XW+1yQliNHCs6451vVFs1dk=\");\n_c = ManageStops;\nvar _c;\n$RefreshReg$(_c, \"ManageStops\");","map":{"version":3,"names":["useEffect","useState","axios","jsxDEV","_jsxDEV","ManageStops","_s","stops","setStops","drivers","setDrivers","roundFilter","setRoundFilter","driverFilter","setDriverFilter","role","localStorage","getItem","token","headers","Authorization","fetchStops","fetchDrivers","url","params","URLSearchParams","append","toString","res","get","data","err","console","error","exportStops","responseType","blob","Blob","type","link","document","createElement","href","window","URL","createObjectURL","download","click","children","className","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","e","target","map","d","id","name","onClick","length","stop","round_name","stop_order","latitude","longitude","placename","driver_name","school_name","Date","created_at","toLocaleString","_c","$RefreshReg$"],"sources":["/Users/rupeshkumarsingh/Downloads/Gps-frontend/webadmin/src/pages/ManageStops.js"],"sourcesContent":["// // src/pages/ManageStops.js\n// import { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n\n// export default function ManageStops() {\n//   const [stops, setStops] = useState([]);\n//   const role = localStorage.getItem(\"role\");\n//   const token = localStorage.getItem(\"token\");\n// const [roundFilter, setRoundFilter] = useState(\"\");\n// const [driverFilter, setDriverFilter] = useState(\"\");\n\n//   const headers = { Authorization: `Bearer ${token}` };\n\n//   useEffect(() => {\n//     fetchStops();\n//   }, []);\n\n//   // ‚úÖ Fetch stops\n//   const fetchStops = async () => {\n//     try {\n//       let url = \"\";\n//       if (role === \"superadmin\") {\n//         url = \"https://gps.smartbus360.com/api/stops/all\";\n//       } else if (role === \"schooladmin\") {\n//         url = \"https://gps.smartbus360.com/api/stops/school\";\n//       }\n//       const res = await axios.get(url, { headers });\n//       setStops(res.data);\n//     } catch (err) {\n//       console.error(\"Error fetching stops:\", err);\n//     }\n//   };\n\n//   // ‚úÖ Export stops CSV\n//   const exportStops = async () => {\n//     try {\n//       let url = \"\";\n//       if (role === \"superadmin\") {\n//         url = \"https://gps.smartbus360.com/api/stops/export/all\";\n//       } else if (role === \"schooladmin\") {\n//         url = \"https://gps.smartbus360.com/api/stops/export/school\";\n//       }\n\n//       const res = await axios.get(url, {\n//         headers,\n//         responseType: \"blob\", // download CSV\n//       });\n\n//       const blob = new Blob([res.data], { type: \"text/csv\" });\n//       const link = document.createElement(\"a\");\n//       link.href = window.URL.createObjectURL(blob);\n//       link.download =\n//         role === \"superadmin\" ? \"stops_all.csv\" : \"stops_school.csv\";\n//       link.click();\n//     } catch (err) {\n//       console.error(\"Error exporting CSV:\", err);\n//     }\n//   };\n\n//   return (\n//     <div>\n//       <h1 className=\"text-2xl font-bold mb-6\">üõë Manage Stops</h1>\n\n//       <button\n//         onClick={exportStops}\n//         className=\"mb-4 bg-green-600 text-white px-4 py-2 rounded\"\n//       >\n//         ‚¨áÔ∏è Export CSV\n//       </button>\n\n//       {stops.length === 0 ? (\n//         <p>No stops found.</p>\n//       ) : (\n//         <table className=\"min-w-full bg-white border rounded shadow\">\n//           <thead>\n//             <tr className=\"bg-gray-200 text-left\">\n//               <th className=\"py-2 px-4 border\">ID</th>\n//               <th className=\"py-2 px-4 border\">Round</th>\n//               <th className=\"py-2 px-4 border\">Stop Order</th>\n//               <th className=\"py-2 px-4 border\">Latitude</th>\n//               <th className=\"py-2 px-4 border\">Longitude</th>\n//               <th className=\"py-2 px-4 border\">Placename</th>\n//               <th className=\"py-2 px-4 border\">Driver</th>\n//               <th className=\"py-2 px-4 border\">School</th>\n//               <th className=\"py-2 px-4 border\">Created At</th>\n//             </tr>\n//           </thead>\n//           <tbody>\n//             {stops.map((stop) => (\n//               <tr key={stop.id}>\n//                 <td className=\"py-2 px-4 border\">{stop.id}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.round_name}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.stop_order}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.latitude}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.longitude}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.placename}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.driver_name}</td>\n//                 <td className=\"py-2 px-4 border\">{stop.school_name}</td>\n//                 <td className=\"py-2 px-4 border\">\n//                   {new Date(stop.created_at).toLocaleString()}\n//                 </td>\n//               </tr>\n//             ))}\n//           </tbody>\n//         </table>\n//       )}\n//     </div>\n//   );\n// }\n\n// src/pages/ManageStops.js\n// src/pages/ManageStops.js\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nexport default function ManageStops() {\n  const [stops, setStops] = useState([]);\n  const [drivers, setDrivers] = useState([]);\n  const [roundFilter, setRoundFilter] = useState(\"\");\n  const [driverFilter, setDriverFilter] = useState(\"\");\n\n  const role = localStorage.getItem(\"role\");\n  const token = localStorage.getItem(\"token\");\n\n  const headers = { Authorization: `Bearer ${token}` };\n\n  useEffect(() => {\n    fetchStops();\n    if (role === \"schooladmin\") {\n      fetchDrivers();\n    }\n  }, [role]);\n\n  // ‚úÖ Fetch stops (with filters for schooladmin)\n  const fetchStops = async () => {\n    try {\n      let url = \"\";\n      if (role === \"superadmin\") {\n        url = \"https://gps.smartbus360.com/api/stops/all\";\n      } else if (role === \"schooladmin\") {\n        url = \"https://gps.smartbus360.com/api/stops/school\";\n\n        const params = new URLSearchParams();\n        if (roundFilter) params.append(\"round\", roundFilter);\n        if (driverFilter) params.append(\"driver_id\", driverFilter);\n\n        if (params.toString()) {\n          url += `?${params.toString()}`;\n        }\n      }\n\n      const res = await axios.get(url, { headers });\n      setStops(res.data);\n    } catch (err) {\n      console.error(\"Error fetching stops:\", err);\n    }\n  };\n\n  // ‚úÖ Fetch drivers list for dropdown\n  const fetchDrivers = async () => {\n    try {\n      const res = await axios.get(\"https://gps.smartbus360.com/api/drivers\", {\n        headers,\n      });\n      setDrivers(res.data);\n    } catch (err) {\n      console.error(\"Error fetching drivers:\", err);\n    }\n  };\n\n  // ‚úÖ Export stops CSV (with filters for schooladmin)\n  const exportStops = async () => {\n    try {\n      let url = \"\";\n      if (role === \"superadmin\") {\n        url = \"https://gps.smartbus360.com/api/stops/export/all\";\n      } else if (role === \"schooladmin\") {\n        url = \"https://gps.smartbus360.com/api/schooladmins/export/school\";\n\n        const params = new URLSearchParams();\n        if (roundFilter) params.append(\"round\", roundFilter);\n        if (driverFilter) params.append(\"driver_id\", driverFilter);\n\n        if (params.toString()) {\n          url += `?${params.toString()}`;\n        }\n      }\n\n      const res = await axios.get(url, {\n        headers,\n        responseType: \"blob\",\n      });\n\n      const blob = new Blob([res.data], { type: \"text/csv\" });\n      const link = document.createElement(\"a\");\n      link.href = window.URL.createObjectURL(blob);\n      link.download =\n        role === \"superadmin\" ? \"stops_all.csv\" : \"stops_school.csv\";\n      link.click();\n    } catch (err) {\n      console.error(\"Error exporting CSV:\", err);\n    }\n  };\n\n  return (\n    <div>\n      <h1 className=\"text-2xl font-bold mb-6\">üõë Manage Stops</h1>\n\n      {/* Filter inputs (only for schooladmin) */}\n      {role === \"schooladmin\" && (\n        <div className=\"flex gap-4 mb-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Round Name\"\n            value={roundFilter}\n            onChange={(e) => setRoundFilter(e.target.value)}\n            className=\"border px-2 py-1 rounded\"\n          />\n          <select\n            value={driverFilter}\n            onChange={(e) => setDriverFilter(e.target.value)}\n            className=\"border px-2 py-1 rounded\"\n          >\n            <option value=\"\">All Drivers</option>\n            {drivers.map((d) => (\n              <option key={d.id} value={d.id}>\n                {d.id} - {d.name}\n              </option>\n            ))}\n          </select>\n          <button\n            onClick={fetchStops}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded\"\n          >\n            Apply Filters\n          </button>\n        </div>\n      )}\n\n      <button\n        onClick={exportStops}\n        className=\"mb-4 bg-green-600 text-white px-4 py-2 rounded\"\n      >\n        ‚¨áÔ∏è Export CSV\n      </button>\n\n      {stops.length === 0 ? (\n        <p>No stops found.</p>\n      ) : (\n        <table className=\"min-w-full bg-white border rounded shadow\">\n          <thead>\n            <tr className=\"bg-gray-200 text-left\">\n              <th className=\"py-2 px-4 border\">ID</th>\n              <th className=\"py-2 px-4 border\">Round</th>\n              <th className=\"py-2 px-4 border\">Stop Order</th>\n              <th className=\"py-2 px-4 border\">Latitude</th>\n              <th className=\"py-2 px-4 border\">Longitude</th>\n              <th className=\"py-2 px-4 border\">Placename</th>\n              <th className=\"py-2 px-4 border\">Driver</th>\n              <th className=\"py-2 px-4 border\">School</th>\n              <th className=\"py-2 px-4 border\">Created At</th>\n            </tr>\n          </thead>\n          <tbody>\n            {stops.map((stop) => (\n              <tr key={stop.id}>\n                <td className=\"py-2 px-4 border\">{stop.id}</td>\n                <td className=\"py-2 px-4 border\">{stop.round_name}</td>\n                <td className=\"py-2 px-4 border\">{stop.stop_order}</td>\n                <td className=\"py-2 px-4 border\">{stop.latitude}</td>\n                <td className=\"py-2 px-4 border\">{stop.longitude}</td>\n                <td className=\"py-2 px-4 border\">\n                  {stop.placename || \"N/A\"}\n                </td>\n                <td className=\"py-2 px-4 border\">{stop.driver_name}</td>\n                <td className=\"py-2 px-4 border\">{stop.school_name}</td>\n                <td className=\"py-2 px-4 border\">\n                  {new Date(stop.created_at).toLocaleString()}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}